### JZ52 æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…

---



> **å‰‘æŒ‡ Offer ç³»åˆ—**ğŸŒŸ
>
> *ç»™å²æœˆä»¥æ–‡æ˜ï¼Œè€Œä¸æ˜¯ç»™æ–‡æ˜ä»¥å²æœˆã€‚*



#### é¢˜ç›®æè¿°

---

è¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥åŒ¹é…åŒ…æ‹¬ `.` å’Œ `*` çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚æ¨¡å¼ä¸­çš„å­—ç¬¦` .` è¡¨ç¤ºä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œ `*` è¡¨ç¤ºå®ƒå‰é¢çš„å­—ç¬¦å¯ä»¥å‡ºç°ä»»æ„æ¬¡ï¼ˆåŒ…

å«0æ¬¡ï¼‰ã€‚åŒ¹é…æ˜¯æŒ‡å­—ç¬¦ä¸²çš„æ‰€æœ‰å­—ç¬¦åŒ¹é…æ•´ä¸ªæ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸² `aaa` ä¸æ¨¡å¼ `a.a` å’Œ `ab*ac*a` åŒ¹é…ï¼Œä½†ä¸ `aa.a` å’Œ `ab*a` å‡ä¸åŒ¹é…



#### é¢˜è§£

---

```python
def is_match(s, p):
    """ å›æº¯ """
    if not p:
        return not s  # è¾¹ç•Œæ¡ä»¶
    # ç¬¬ä¸€ä¸ªå­—æ¯æ˜¯å¦åŒ¹é…
    first_match = bool(s and p[0] in {s[0], '.'})
    # å¦‚æœ p ç¬¬äºŒä¸ªå­—æ¯æ˜¯ *
    if len(p) >= 2 and p[1] == "*":
        return is_match(s, p[2:]) or first_match and is_match(s[1:], p)
    else:
        return first_match and is_match(s[1:], p[1:])
```



```python
def is_match(s, p):
    """ åŠ¨æ€è§„åˆ’ """
    # è¾¹ç•Œæ¡ä»¶ï¼Œè€ƒè™‘ s æˆ– p åˆ†åˆ«ä¸ºç©ºçš„æƒ…å†µ
    if not p:
        return not s
    if not s and len(p) == 1:
        return False

    m, n = len(s) + 1, len(p) + 1
    dp = [[False for _ in range(n)] for _ in range(m)]
    # åˆå§‹çŠ¶æ€
    dp[0][0] = True
    dp[0][1] = False

    for c in range(2, n):
        j = c - 1
        if p[j] == '*':
            dp[0][c] = dp[0][c-2]

    for r in range(1, m):
        i = r - 1
        for c in range(1, n):
            j = c - 1
            if s[i] == p[j] or p[j] == '.':
                dp[r][c] = dp[r-1][c-1]
            elif p[j] == '*':  # '*' å‰é¢çš„å­—ç¬¦åŒ¹é… s[i] æˆ– '.'
                if p[j-1] == s[i] or p[j-1] == '.':
                    dp[r][c] = dp[r-1][c] or dp[r][c-2]
                else:
                    dp[r][c] = dp[r][c-2]
            else:
                dp[r][c] = False
    return dp[m-1][n-1]
```



<img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gitnca0hhjj30r20c6758.jpg" style="zoom:50%;" />



**è€ƒå¯Ÿè¦ç‚¹**ğŸ¥ï¼šå­—ç¬¦ä¸²ã€åŠ¨æ€è§„åˆ’ã€é€’å½’

**è§£é¢˜æ€è·¯**ğŸ¬ï¼šå›æº¯ï¼›åŠ¨æ€è§„åˆ’ã€‚

- **å›æº¯**ï¼šè€ƒè™‘åªæœ‰ `.` çš„æƒ…å†µï¼Œä»å·¦åˆ°å³ä¾æ¬¡åˆ¤æ–­ `s[i]` ä¸ `p[i]` æ˜¯å¦åŒ¹é…ã€‚

  - è‹¥æœ‰ `*`:  `*` ä»£è¡¨0ä¸ªå‰é¢çš„å…ƒç´ ï¼Œåˆ™ç›´æ¥å¿½ç•¥ `p` çš„ `a*`ï¼›`*` ä»£è¡¨åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå‰é¢çš„å…ƒç´ ï¼Œåˆ™å¿½ç•¥ `s` çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚

- **åŠ¨æ€è§„åˆ’**ï¼š`dp[i][j]` è¡¨ç¤º `s` çš„å‰ `i` é¡¹å’Œ `p` çš„å‰ `j` é¡¹æ˜¯å¦åŒ¹é…ã€‚ä»¥ä¸‹æ˜¯æ‰€æœ‰èƒ½åŒ¹é…çš„æƒ…å†µğŸ‘‡

  - `s[i] == p[j] or p[j] == '.'`
  - `p[j] == '*'` -> `p[j-1] != s[i]` or `p[j-1] == s[i] or p[j-1] == '.'`
  - æ²¿ç€åŒ¹é…ä¸²å’Œå­—ç¬¦ä¸²æ„æˆçŸ©é˜µçš„å¯¹è§’çº¿ä¼ é€’çŠ¶æ€

  

**æ—¶é—´å¤æ‚åº¦**ğŸ‰ï¼šO(mn)

**ç©ºé—´å¤æ‚åº¦**ğŸ­ï¼šO(mn)

